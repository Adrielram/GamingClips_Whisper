# üéÆ GameClipping - Transcriptor Ultra-Preciso

**Transcripci√≥n autom√°tica de videos de gaming a subt√≠tulos con precisi√≥n palabra por palabra.**

Optimizado para espa√±ol argentino y contenido de gaming. Usa modelos de IA avanzados para generar subt√≠tulos sincronizados con timestamps precisos.

---

## üöÄ Uso S√∫per F√°cil

### **üéØ M√©todo Principal (Recomendado)**
```bash
# 1. Arrastra tu video MP4 al archivo:
transcribe_FINAL.bat

# 2. ¬°Espera y listo! Se genera tu_video.srt autom√°ticamente
```

### **‚≠ê NUEVO: M√©todo Ultra-Mejorado**
```bash
# Para m√°xima precisi√≥n y correcci√≥n de problemas:
transcribe_MEJORADO.bat
```

### **üéØ NUEVO: Sync-Perfect (para problemas de sincronizaci√≥n)**
```bash
# Si los subt√≠tulos aparecen antes/despu√©s del audio:
transcribe_SYNC_PERFECT.bat
```

**Mejoras espec√≠ficas:**
- üî§ **Palabras correctas:** Diccionario gaming argentino (Gabriel vs abriel)
- üîä **Tiempos muertos:** VAD agresivo detecta m√°s audio
- ‚è±Ô∏è **Sincronizaci√≥n:** SYNC-PERFECT mantiene timestamps originales de Whisper

**Caracter√≠sticas autom√°ticas:**
- ‚úÖ Modelo `large-v3` (m√°xima calidad)
- ‚úÖ Timestamps palabra por palabra  
- ‚úÖ Optimizado para gaming argentino
- ‚úÖ Archivo `.srt` con mismo nombre del video
- ‚úÖ Ultra-preciso y sincronizado

---

## üìÅ Estructura del Proyecto

```
GameClipping/
‚îú‚îÄ‚îÄ transcribe_FINAL.bat       # ‚≠ê SCRIPT PRINCIPAL - Drag & Drop
‚îú‚îÄ‚îÄ transcribe_MEJORADO.bat    # üî• NUEVO: Ultra-mejorado con correcciones
‚îú‚îÄ‚îÄ transcribe_SYNC_PERFECT.bat # üéØ NUEVO: Sincronizaci√≥n perfecta
‚îú‚îÄ‚îÄ transcribe_CHUNKED.bat     # üß© NUEVO: Segmentaci√≥n inteligente
‚îú‚îÄ‚îÄ transcribe_ENHANCED.bat    # üéµ NUEVO: Pre-procesamiento de audio avanzado
‚îú‚îÄ‚îÄ transcribe_MULTIPASS.bat   # üéØ NUEVO: M√∫ltiples pasadas adaptativas
‚îú‚îÄ‚îÄ transcribe_precise.py      # Script de transcripci√≥n ultra-precisa
‚îú‚îÄ‚îÄ transcribe_mejorado.py     # üÜï Script con todas las mejoras
‚îú‚îÄ‚îÄ transcribe_sync_perfect.py # üÜï Script sync-perfect (timestamps originales)
‚îú‚îÄ‚îÄ transcribe_chunked.py      # üÜï Script chunking inteligente
‚îú‚îÄ‚îÄ transcribe_enhanced.py     # üÜï Script con pre-procesamiento de audio
‚îú‚îÄ‚îÄ transcribe_multipass.py    # üÜï Script con m√∫ltiples pasadas
‚îú‚îÄ‚îÄ main.py                    # Script original completo
‚îú‚îÄ‚îÄ MEJORAS_PRECISION.md       # üìñ Gu√≠a detallada de mejoras
‚îú‚îÄ‚îÄ requirements.txt           # Dependencias Python
‚îú‚îÄ‚îÄ README.md                  # Esta documentaci√≥n
‚îú‚îÄ‚îÄ venv/                      # Entorno virtual (FUNCIONA)
‚îú‚îÄ‚îÄ tools/                     # Herramientas auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ analizar_transcripcion.py  # üîç Analiza calidad de SRT
‚îÇ   ‚îú‚îÄ‚îÄ analizar_sync.py           # üéØ Analiza problemas de sincronizaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ precise_transcribe.py      # Transcripci√≥n avanzada
‚îÇ   ‚îî‚îÄ‚îÄ [otras herramientas]
‚îú‚îÄ‚îÄ audio_clean/              # Audio procesado
‚îú‚îÄ‚îÄ output/                   # Archivos generados
‚îî‚îÄ‚îÄ examples/                 # Ejemplos y tests
```

---

## ÔøΩ MODOS DE TRANSCRIPCI√ìN

### üìä ¬øCu√°l usar?

| Modo | Uso Recomendado | Fortalezas |
|------|----------------|------------|
| **FINAL** | ‚≠ê Uso general diario | R√°pido, confiable, funciona bien |
| **MEJORADO** | üî• M√°xima precisi√≥n de palabras | Vocabulario gaming, correcciones ortogr√°ficas |
| **SYNC_PERFECT** | üéØ Problemas de timing | Preserva timestamps originales de Whisper |
| **CHUNKED** | üß© **Subt√≠tulos muy largos** | **Segmenta texto en fragmentos naturales** |
| **ENHANCED** | üéµ **Audio de baja calidad** | **Pre-procesamiento avanzado de audio** |
| **MULTIPASS** | üéØ **M√°xima cobertura** | **M√∫ltiples pasadas + Merge inteligente** |

### üß© **NUEVO: CHUNKED - Para subt√≠tulos largos**

**Problema que resuelve:**
- ‚ùå Subt√≠tulos que muestran muchas palabras juntas por mucho tiempo
- ‚ùå Texto que no aparece gradualmente sincronizado con el audio
- ‚ùå Fragmentos muy largos dif√≠ciles de leer

**Soluci√≥n:**
- ‚úÖ **Segmenta** subt√≠tulos largos en fragmentos de 40-45 caracteres
- ‚úÖ **Distribuye** palabras a lo largo del tiempo proporcionalmente  
- ‚úÖ **Respeta** pausas naturales y puntuaci√≥n
- ‚úÖ **Mantiene** la precisi√≥n de palabras ya lograda

**√ösalo cuando:**
- Los subt√≠tulos duran demasiado tiempo
- Aparecen muchas palabras de golpe
- Quieres lectura m√°s natural y gradual

### üéµ **NUEVO: ENHANCED - Para audio de baja calidad**

**Problema que resuelve:**
- ‚ùå Audio con mucho ruido de fondo
- ‚ùå Voces que se mezclan con efectos de videojuegos
- ‚ùå Grabaciones con mala calidad de micr√≥fono
- ‚ùå M√∫sica/efectos que interfieren con la transcripci√≥n

**Soluci√≥n:**
- ‚úÖ **Pre-procesamiento** avanzado con FFmpeg
- ‚úÖ **Reducci√≥n de ruido** adaptativa y filtros FFT
- ‚úÖ **Mejora de frecuencias** espec√≠ficas de voz humana
- ‚úÖ **Compresi√≥n din√°mica** para separar voz de efectos
- ‚úÖ **Filtros gaming** especializados (ventiladores, teclado, etc.)
- ‚úÖ **Normalizaci√≥n** inteligente de volumen

**√ösalo cuando:**
- El audio tiene mucho ruido de fondo
- Hay m√∫sica o efectos muy fuertes
- El micr√≥fono es de baja calidad
- Quieres m√°xima precisi√≥n en audio dif√≠cil

### üéØ **NUEVO: MULTIPASS - Para m√°xima cobertura**

**Problema que resuelve:**
- ‚ùå Tiempos muertos que no detecta una sola pasada
- ‚ùå Speech que se pierde con configuraci√≥n conservadora
- ‚ùå Susurros o habla muy baja que pasa desapercibida
- ‚ùå Necesidad de balance entre precisi√≥n y cobertura

**Soluci√≥n:**
- ‚úÖ **3 Pasadas adaptativas** con diferentes niveles de agresividad
- ‚úÖ **Pasada conservadora** para speech claro (alta confianza)
- ‚úÖ **Pasada agresiva** para cubrir tiempos muertos
- ‚úÖ **Pasada ultra-agresiva** para detectar susurros
- ‚úÖ **Merge inteligente** eliminando duplicados y conflictos
- ‚úÖ **Priorizaci√≥n** por confianza y consistencia
- ‚úÖ **Relleno de gaps** con segmentos de menor confianza

**√ösalo cuando:**
- Quieres la m√°xima cobertura posible
- Hay partes muy dif√≠ciles de detectar
- Necesitas capturar desde speech claro hasta susurros
- Quieres la transcripci√≥n m√°s completa posible

---

## ÔøΩüîß M√©todos Alternativos

### **üî• Ultra-Mejorado (Para casos problem√°ticos)**
```bash
# Arrastra tu video al script mejorado:
transcribe_MEJORADO.bat

# O ejecuta manualmente:
python transcribe_mejorado.py "tu_video.mp4"
```

### **Manual con Python**
```bash
# Activar entorno virtual
venv\Scripts\activate

# Ejecutar transcripci√≥n
python transcribe_precise.py "tu_video.mp4"
```

### **Con main.py (control total)**
```bash
python main.py --video "video.mp4" --model large-v3 --device auto
```

---

## ‚öôÔ∏è Instalaci√≥n (Solo Primera Vez)

### **Requisitos**
- Python 3.8+
- FFmpeg instalado
- GPU (opcional, mejora velocidad)

### **Setup R√°pido**
```bash
# 1. Crear entorno virtual
python -m venv venv

# 2. Activar entorno
venv\Scripts\activate

# 3. Instalar dependencias
pip install -r requirements.txt
```

---

## üéØ Caracter√≠sticas T√©cnicas

### **Configuraci√≥n Optimizada**
- **Modelo:** `large-v3` (mejor disponible)
- **Beam Size:** `5` (m√°xima precisi√≥n)
- **Compute Type:** `float16` (velocidad √≥ptima)
- **Word Timestamps:** Activado (sincronizaci√≥n perfecta)
- **VAD Filter:** Activado (mejor segmentaci√≥n)
- **Language:** Espa√±ol argentino
- **Gaming Prompt:** Optimizado para gaming

### **Calidad de Salida**
- ‚úÖ Subt√≠tulos sincronizados palabra por palabra
- ‚úÖ Timestamps precisos al milisegundo
- ‚úÖ Optimizado para jerga gamer argentina
- ‚úÖ Detecta pausas y silencios autom√°ticamente
- ‚úÖ Formato SRT compatible con todos los players

---

## üìä Rendimiento

- **Video 2 minutos:** ~3-5 minutos procesamiento
- **Precisi√≥n:** >95% para audio claro
- **Sincronizaci√≥n:** Precisi√≥n de milisegundos
- **Compatibilidad:** Todos los formatos de video comunes

---

## üõ†Ô∏è Herramientas Incluidas

### **tools/ - Utilidades**
- `evaluate_wer.py` - Calcular precisi√≥n (Word Error Rate)
- `postprocess_subs.py` - Post-procesar subt√≠tulos
- `preprocess_audio.py` - Limpiar audio antes de transcribir

### **Ejemplos de Uso**
```bash
# Evaluar precisi√≥n de transcripci√≥n
python tools/evaluate_wer.py original.srt transcrito.srt

# Post-procesar subt√≠tulos
python tools/postprocess_subs.py archivo.srt

# Pre-procesar audio
python tools/preprocess_audio.py video.mp4
```

---

## üéÆ Optimizaci√≥n Gaming

### **Prompt Especializado**
El sistema incluye prompts optimizados para contenido de gaming:
- Reconoce jerga gamer
- Entiende expresiones argentinas
- Detecta nombres de juegos y personajes
- Maneja exclamaciones y reacciones t√≠picas

### **Ejemplos de Reconocimiento**
- "Che, mir√° esto" ‚úÖ
- "Qu√© genial, dale vamos" ‚úÖ 
- "GG, buena partida" ‚úÖ
- "Nooo, me mataron" ‚úÖ

---

## üîç Soluci√≥n de Problemas

### **Error: Video no encontrado**
- Verificar que el archivo existe
- Usar rutas sin espacios o entre comillas

### **Error: Python no encontrado**
- Verificar instalaci√≥n de Python
- Activar entorno virtual: `venv\Scripts\activate`

### **Error: FFmpeg no encontrado**
- Instalar FFmpeg: `https://ffmpeg.org/`
- Agregar al PATH del sistema

### **Transcripci√≥n lenta**
- Usar GPU si est√° disponible
- Verificar que no hay otros procesos pesados ejecut√°ndose

---

## üìù Formato de Salida

### **Archivo SRT Generado**
```
1
00:00:00,000 --> 00:00:02,500
Hola che, vamos a jugar un poco

2
00:00:02,500 --> 00:00:05,000
Mir√° este nivel, est√° genial

3
00:00:05,000 --> 00:00:07,500
Dale, vamos que podemos ganar
```

### **Caracter√≠sticas del SRT**
- Timestamps precisos (milisegundos)
- M√°ximo 7 palabras por l√≠nea
- M√°ximo 3 segundos por subt√≠tulo
- Breaks inteligentes en pausas naturales
- Codificaci√≥n UTF-8 (soporta acentos)

---

## üöÄ Pr√≥ximas Mejoras

- [ ] Soporte para m√∫ltiples idiomas
- [ ] Detecci√≥n autom√°tica de idioma  
- [ ] Interfaz gr√°fica (GUI)
- [ ] Transcripci√≥n en tiempo real
- [ ] Integraci√≥n con OBS Studio

---

## üéØ Mejoras de Precisi√≥n Implementadas

### **üìñ Documento Detallado**
Ver `MEJORAS_PRECISION.md` para an√°lisis completo de problemas y soluciones.

### **üî§ Problema: Palabras Incorrectas**
**Ejemplo:** "abriel" en lugar de "Gabriel"

**Soluciones implementadas:**
- ‚úÖ Diccionario personalizado con nombres gaming argentinos
- ‚úÖ Correcci√≥n ortogr√°fica post-procesamiento
- ‚úÖ Prompts especializados para gaming
- ‚úÖ Pre-procesamiento de audio mejorado

### **üîá Problema: Tiempos Muertos** 
**Ejemplo:** No se generan subt√≠tulos durante ruidos o voces simult√°neas

**Soluciones implementadas:**
- ‚úÖ VAD (Voice Activity Detection) m√°s agresivo
- ‚úÖ Umbral de confianza reducido
- ‚úÖ Separaci√≥n de fuentes de audio
- ‚úÖ Detecci√≥n de speech m√°s corto

### **‚è±Ô∏è Problema: Desincronizaci√≥n Temporal**
**Ejemplo:** Subt√≠tulos aparecen 1-2 segundos antes al final del video

**Soluciones implementadas:**
- ‚úÖ Correcci√≥n autom√°tica de drift temporal
- ‚úÖ Sincronizaci√≥n con landmarks de audio
- ‚úÖ Timestamps de referencia con FFmpeg
- ‚úÖ Ajuste progresivo de timestamps

### **üìä Herramienta de An√°lisis**
```bash
# Analizar calidad de transcripci√≥n existente:
python tools/analizar_transcripcion.py archivo.srt
```

**Detecta autom√°ticamente:**
- üîç Palabras sospechosas o mal transcritas
- üîç Huecos temporales largos
- üîç Problemas de sincronizaci√≥n
- üîç Drift temporal acumulativo

---

## üìû Soporte

**¬øProblemas?** 
1. Verificar que `transcribe_FINAL.bat` existe
2. Probar arrastrar un video corto (30 segundos)
3. Revisar que FFmpeg est√° instalado
4. Verificar espacio en disco disponible

**¬°Tu video de gaming ser√° transcrito con precisi√≥n milim√©trica!** üéØ